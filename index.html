<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>StatusPage</title>

    <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
    <link href="dist/stylesheet.css" rel="stylesheet">

    <script>
        let settings = {
            'refreshInterval': 300,
        }
    </script>
</head>
<body>
    <div id="vueApp-status">
        <div v-cloak>
            <div v-if="global.loader.active" id="loader"><img class="loader--gif" src="dist/img/loader.gif" /></div>
            <div class="page--header">
                <span style="position: absolute; color: #fff; top: 2%; left: 2%; text-align: right">
                    Refreshing in: <span v-if="global.timeleft === 1">{{global.timeleft}} Second</span><span v-else>{{global.timeleft}} Seconds</span>
                </span>
                <span class="page--header--text">LegendEffects</span>
            </div>

            <div class="page--container">
                <div id="status-global">
                    <div class="status--current--container" :class="'status--'+global.status">{{global.message}}</div>
                </div>

                <div id="status-monitors">
                    <div v-for="monitor in reqFeedback.psp.monitors">
                        <div class="monitor--container" v-on:click="revealExtra(monitor.id)" :id="monitor.id" style="cursor: pointer">
                            <div class="monitor--container--pad">
                                <div class="monitor--data--container">
                                <span class="monitor--data--title">{{monitor.friendly_name}}</span>
                                <span class="monitor--data--status" :class="'status--'+parseStatus(monitor.statusLabel).toLowerCase()+'--c'">{{parseStatus(monitor.oneWeekRange.label)}}</span>
                            </div>
                                <div class="monitor--data--percentile--container">
                                    <span v-for="range in monitor.customuptimeranges" class="monitor--data--indicator--block" :class="'status--'+parseSeverity(range.ratio).toLowerCase()">{{range.ratio}}%</span>
                                </div>
                                <div class="monitor--data--base--container">
                                    <div class="monitor--data--base--data">6 Days Ago</div>
                                    <div class="monitor--data--base--spacer"></div>

                                    <div class="monitor--data--base--data monitor--data--base--center">{{monitor.oneWeekRange.ratio}}%</div>

                                    <div class="monitor--data--base--spacer"></div>
                                    <div class="monitor--data--base--data">Today</div>
                                </div>
                            </div>
                            <div class="monitor--extraInfo--container monitor--data--container">
                                <div class="contain">
                                    <span class="monitor--data--title">{{monitor.typeStr.toUpperCase()}} - (Checked every {{monitor.intervalMin}} minutes.)</span>
                                    <div class="chart-container" :id="'chart-'+monitor.id" style="width: 100%; height: 200px; margin-top: 20px;"></div>
                                    <div class="latestLog eventTable">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Event</th>
                                                    <th>Date</th>
                                                    <th>Reason</th>
                                                    <th>Duration</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="log in monitor.allLogs.slice(-3).reverse()">
                                                    <td><span class="circle" :class="'status--'+log.label+'--c'"></span>
                                                    <td>{{log.dateTimeStr}}</td>
                                                    <td>{{log.reasonStr}}</td>
                                                    <td>{{log.durationStr}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="status-recentDown" v-if="reqFeedback.psp.latestDownTimeStr.length > 0">
                    <div class="monitor--data--downtime">
                        <div class="monitor--container--titlebar status--unknown">Recent Downtime</div>
                        <div class="monitor--container monitor--data--downtime--mod monitor--container--pad">
                            <span class="monitor--data--downtime--main">{{reqFeedback.psp.latestDownTimeStr}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script src="dist/vendor/vue/vue.min.js"></script>
<script src="dist/vendor/highcharts/highcharts.min.js"></script>
<script src="dist/vendor/highcharts/HighchartsAdapter.js"></script>
<script src="dist/js/util.js"></script>
<script src="dist/js/status.js"></script>

</html>

